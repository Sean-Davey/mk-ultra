import React , { Component } from 'react';
import { TimelineMax } from 'gsap';
import Waypoint from 'react-waypoint';
import Confidential from '../Confidential';
import './style.css';

class TheAgent extends Component {
    constructor(props) {
        super(props);
        this.ruledBySecrecy = this.ruledBySecrecy.bind(this);
        this.state = {
			animationEntered: false,
			playConfidential: false
        }
    }

    componentDidMount() {
		this.theAgenttl = new TimelineMax({paused: true});
		this.secrettl = new TimelineMax({paused: true});

        const {
			theAgenttl,
			secrettl
        } = this;

        theAgenttl.from("#AgentArm", 1, {autoAlpha: 0, y:600})
            .to("#AgentHand", 1.2, {rotation: -40, transformOrigin: "20% 50%", x:25}, "inspect")
            .to("#Head", 1.2, {rotation: 10, transformOrigin: "50% 100%", x:480}, "inspect")
            .to("#CapsuleHead", 0.4, {repeat: -1, yoyo: true, fill: '#74BFFF'}, "interest")
            .from("#poi", 0.6, {autoAlpha: 0, transformOrigin: "40% 100%", scaleY: 0, repeat: -1}, "interest")
			theAgenttl.timeScale(0.8);
			
		secrettl.to("#agent", 0.5, { autoAlpha: 0}, "discovered")
		.to("#agentBackground", 0, {fill: '#201F1F'}, "discovered")
		.to("#agent", 0.8, {display: 'none'}, "discovered")
    }

    runAnimation = () => {
        console.log('Animation entered');
		this.theAgenttl.play(0, false);
    }

    onEnter = () => {
        const {
            animationEntered
        } = this.state;

        if (animationEntered) {
            return;
        }
        else {
            this.runAnimation();

            this.setState({
                animationEntered: true,
            });
        }
    }

    ruledBySecrecy() {
		this.theAgenttl.reverse(1.2);
		this.secrettl.play(0, false);
		this.setState({playConfidential: true})
    }

    render() {
        return (
<div>
            <Waypoint onEnter={this.onEnter}>
            <svg id="theAgent" viewBox="0 0 1440 800">
	<g id="Desktop-HD" fill="none" fillRule="evenodd" stroke="none" strokeWidth="1">
		<rect id="agentBackground" height="800" width="1440" fill="#C93030" x="0" y="0"/>
		<g id="agent">
		<g id="Head" fillRule="nonzero" transform="translate(487.000000, 25.000000)">
			<path id="Path-6" d="M132.842857,397.850522 L144.046535,307.231699 C134.708189,283.888529 126.309514,268.677061 118.85051,261.597293 C111.391506,254.517525 106.658131,248.117083 104.650386,242.395965 L80.9610137,132.560156 C71.2766446,85.8797762 88.5705922,52.0772706 132.842857,31.1526396 C139.189816,28.1528431 179.153474,9.27111984 236.388686,9.27111984 C288.635338,9.27111984 325.180816,33.7131631 346.025121,82.5972495 C416.079706,72.5507242 453.641949,79.7990551 458.711849,104.342242 C461.609776,118.370989 441.607099,129.644804 417.861143,141.69642 C406.642691,147.390042 385.596431,155.200263 354.722365,165.127084 L382.663654,222.304605 L354.722365,242.395965 L354.722365,318.606238 L323.681016,334.232787 L323.681016,388.395717 L132.842857,397.850522 Z" fill="#E1E1E1"/>
			<path id="Path-6" d="M0.269203242,173.858781 C0.269203242,157.478398 25.9075426,141.702636 77.1842212,126.531494 C67.1619938,82.4981046 84.2870122,50.0190944 128.559276,29.0944633 C134.906236,26.0946668 186.791956,0.775401207 244.027168,0.775401207 C296.273819,0.775401207 330.273137,28.0493506 346.025121,82.5972495 C415.233955,70.6971589 453.379648,77.1129776 460.462201,101.844706 C462.382976,108.551903 451.427652,130.159369 430.194246,141.75486 C414.974992,150.066043 389.874306,157.974776 354.892185,165.481058 L354.892185,135.353163 C308.260785,126.029312 253.314431,134.178391 190.053124,159.800398 C175.234278,165.802307 168.371254,189.316006 169.464053,230.341496 C141.22216,198.603052 120.39154,192.069546 106.972193,210.740977 C98.1553647,223.008548 0.269203242,198.429355 0.269203242,173.858781 Z" fill="#252525"/>
			<path id="Path-7" d="M77.1049023,126.631358 C77.1049023,126.631358 103.994193,116.866683 145.655477,106.603849 C168.347976,101.013782 226.444735,90.4554329 284.067963,82.8152956 C322.483448,77.7218707 343.133861,77.7218707 346.019203,82.8152956 C344.401473,77.039736 342.525242,71.8879206 340.390509,67.3598494 C337.188411,60.5677427 324.757203,54.645629 267.451879,61.4377357 C246.930551,63.8700237 226.699025,66.8510763 206.757301,70.3808935 C184.202757,73.9462038 159.75726,78.9679113 133.420808,85.4460159 C93.9161309,95.1631728 74.6012347,99.0276605 74.6012347,106.603849 C74.6012347,114.180037 77.1049023,126.631358 77.1049023,126.631358 Z" fill="#CBCBCB"/>
			<path id="Path-8" d="M45.0957801,137.131223 C33.2278086,141.858164 25.0054999,145.555783 20.428854,148.224079 C15.8522081,150.892375 10.9090895,155.128124 5.59949826,160.931325 C15.8995703,153.204436 27.1626412,148.968687 39.3887111,148.224079 C221.241726,137.148623 357.396416,137.890434 385.775261,131.760935 C436.580211,120.787658 460.941647,109.513568 458.859568,97.9386642 C455.426247,90.6131496 449.65135,85.1719824 441.53488,81.6151627 C404.895641,65.5590246 289.059796,77.0241257 201.763209,94.1440053 C148.539016,104.581891 96.3165403,118.910963 45.0957801,137.131223 Z" fill="#1D1D1D"/>
			<path id="NiceHair" d="M80.0258051,145.459065 L256.026544,138.225767 L183.039216,163.715741 L170.728553,237.539938 C165.264268,228.784627 161.735648,223.550938 160.142694,221.838872 C152.911659,214.067142 146.58503,208.021542 136.581067,205.000811 C116.616542,198.972455 102.004232,208.823606 104.499834,225.137262 C106.000225,234.94526 113.867875,250.650167 127.400489,272.531471 C128.382665,274.119581 129.810184,276.619875 131.683045,280.032353 C117.286208,269.848887 107.563532,261.391834 102.515017,254.661193 C91.2919537,239.698691 84.3155922,201.902982 83.2125054,196.848468 C82.1510719,191.984817 81.0888385,174.855016 80.0258051,145.459065 Z" fill="#1F1F1F"/>
		</g>
		<g id="LeftChest" fillRule="nonzero" transform="translate(344.000000, 403.000000)">
			<polygon id="Suit" fill="#303030" points="6.26693596 397 17.1445696 333.698818 10.1354274 262.947169 0.286150764 193.172945 30.0405103 118.410744 225.13646 40.2666034 266.631159 1.98637339 368.377701 8.92162214 368.377701 397"/>
			<polygon id="ShirtFold" fill="#EAE9E9" points="225.632305 39.9444369 266.419966 0.394447746 368.338915 8.90932074 262.935461 88.0937164"/>
			<path id="Fold" d="M225.678598,39.7885031 L167.854482,185.266656 L267.856841,185.266656 L232.845071,242.751592 L299.081255,397 L368.37832,397 C369.951144,361.200373 370.737557,333.368229 370.737557,313.503569 C370.737557,293.638909 369.951144,263.476671 368.37832,223.016855 L225.678598,39.7885031 Z" fill="#252525"/>
			<path id="FurtherShadow" d="M167.825023,185.327776 C179.857515,190.760186 190.356837,193.080233 199.322988,192.287917 C208.289139,191.495601 231.200843,189.028034 268.058099,184.885215 L167.825023,185.327776 Z" fill="#201F1F"/>
			<path id="InlayShadow" d="M232.898721,242.763182 C242.356519,277.370038 250.945693,305.625378 258.666241,327.529203 C266.38679,349.433028 276.239458,372.58996 288.224246,397 L299.131776,397 L232.898721,242.763182 Z" fill="#201F1F"/>
			<polygon id="ArmShading" fill="#201F1F" points="153.302791 211.025296 165.859973 291.88862 153.302791 349.875309 162.425192 396.962578 162.425192 349.875309 181.286898 291.88862"/>
			<polygon id="Shoulder" fill="#282828" points="0.252491256 192.751501 51.8443233 127.512016 129.358368 97.5895106 162.636372 71.0891264 222.150363 49.342273 226.152308 39.8355769 29.5243454 118.509984"/>
			<polygon id="Shirt" fill="#C4C4C4" points="268.346555 94.708417 329.177921 42.2708065 355.041182 75.2192763 332.990493 177.073802"/>
			<path id="TieBase" d="M368.372578,8.8798194 L327.578825,39.2279838 L355.061112,75.2307515 L328.173574,171.049965 L368.372578,223.028031 C370.06885,182.125891 370.916986,148.943641 370.916986,123.481282 C370.916986,98.018923 370.06885,59.8184355 368.372578,8.8798194 Z" fill="#A22525"/>
			<path id="TieHead" d="M368.345085,8.87445115 L323.661384,42.5252399 L355.137961,75.2445619 C357.202972,75.8655398 360.054913,76.1760287 363.693783,76.1760287 C367.332653,76.1760287 369.88447,76.1760287 371.349234,76.1760287 L368.345085,8.87445115 Z" fill="#932929"/>
			<path id="Collar" d="M263.05193,87.9153236 L268.345549,94.7246264 L368.322399,8.87346313 C337.397887,30.2466432 314.558777,46.4392266 299.805069,57.4512133 C285.051361,68.4631999 272.800314,78.6179034 263.05193,87.9153236 Z" fill="#DDDDDD"/>
		</g>
		<g id="RightChest" fillRule="nonzero" transform="translate(894.000000, 601.500000) scale(-1, 1) translate(-894.000000, -601.500000) translate(708.000000, 403.000000)">
			<polygon id="Suit" fill="#303030" points="6.26693596 397 17.1445696 333.698818 10.1354274 262.947169 0.286150764 193.172945 30.0405103 118.410744 225.13646 40.2666034 266.631159 1.98637339 368.377701 8.92162214 368.377701 397"/>
			<polygon id="ShirtFold" fill="#EAE9E9" points="225.632305 39.9444369 267.722177 0.01685492 368.338915 8.90932074 262.935461 88.0937164"/>
			<path id="Fold" d="M225.678598,39.7885031 L167.854482,185.266656 L267.856841,185.266656 L232.845071,242.751592 L299.081255,397 L368.37832,397 C369.951144,361.200373 370.737557,333.368229 370.737557,313.503569 C370.737557,293.638909 369.951144,263.476671 368.37832,223.016855 L225.678598,39.7885031 Z" fill="#252525"/>
			<path id="FurtherShadow" d="M167.825023,185.327776 C179.857515,190.760186 190.356837,193.080233 199.322988,192.287917 C208.289139,191.495601 231.200843,189.028034 268.058099,184.885215 L167.825023,185.327776 Z" fill="#201F1F"/>
			<path id="InlayShadow" d="M232.898721,242.763182 C242.356519,277.370038 250.945693,305.625378 258.666241,327.529203 C266.38679,349.433028 276.239458,372.58996 288.224246,397 L299.131776,397 L232.898721,242.763182 Z" fill="#201F1F"/>
			<polygon id="Shoulder" fill="#282828" points="0.252491256 192.751501 51.8443233 127.512016 129.358368 97.5895106 162.636372 71.0891264 222.150363 49.342273 226.152308 39.8355769 29.5243454 118.509984"/>
			<polygon id="ArmShading" fill="#201F1F" points="139.710407 210.721868 152.267589 291.585193 139.710407 349.571882 148.832808 396.659151 148.832808 349.571882 167.694514 291.585193"/>
			<polygon id="Shirt" fill="#C4C4C4" points="268.346555 94.708417 329.177921 42.2708065 355.041182 75.2192763 332.990493 177.073802"/>
			<path id="TieBase" d="M368.372578,8.8798194 L327.578825,39.2279838 L355.061112,75.2307515 L328.173574,171.049965 L368.372578,223.028031 C370.06885,182.125891 370.916986,148.943641 370.916986,123.481282 C370.916986,98.018923 370.06885,59.8184355 368.372578,8.8798194 Z" fill="#A22525"/>
			<path id="TieHead" d="M368.345085,8.87445115 L323.661384,42.5252399 L355.137961,75.2445619 C357.202972,75.8655398 360.054913,76.1760287 363.693783,76.1760287 C367.332653,76.1760287 369.88447,76.1760287 371.349234,76.1760287 L368.345085,8.87445115 Z" fill="#932929"/>
			<path id="Collar" d="M263.05193,87.9153236 L268.345549,94.7246264 L368.322399,8.87346313 C337.397887,30.2466432 314.558777,46.4392266 299.805069,57.4512133 C285.051361,68.4631999 272.800314,78.6179034 263.05193,87.9153236 Z" fill="#DDDDDD"/>
		</g>
		<g id="ShadingDetails" fillRule="nonzero" transform="translate(520.000000, 415.000000)">
			<polygon id="Path-2" fill="#201F1F" points="192.49766 210.927094 188.539558 210.927094 192.49766 385 196.500302 210.927094" transform="translate(192.519930, 297.963547) scale(1, -1) translate(-192.519930, -297.963547) "/>
			<polygon id="Path-3" fill="#201F1F" points="0.391097682 168.44366 51.461146 44.5142836 80.1252446 80.0531836 54.7044095 65.412808"/>
			<polygon id="Path-3" fill="#201F1F" points="304.874755 168.579267 355.944804 44.6498906 384.608902 80.1887906 359.188067 65.5484151" transform="translate(344.741829, 106.614579) scale(-1, 1) translate(-344.741829, -106.614579) "/>
			<polygon id="Path-4" fill="#9F2F2F" points="191.29384 0.728550954 155.183898 32.6719677 181.077604 59.6877346 168.713402 32.6719677"/>
			<polygon id="Path-5" fill="#AE2828" points="181.295402 66.7810694 157.454043 159.593875 169.475819 174.041901"/>
			<circle id="Oval" cx="88.4573304" cy="62.3413567" fill="#6B6969" r="5.89715536"/>
			<polygon id="Rectangle" fill="#CBCACA" points="81.7177243 57.8939737 83.9190255 55.6017505 95.3165965 66.6696212 93.1152952 68.9618443" transform="translate(88.517160, 62.281797) rotate(-360.000000) translate(-88.517160, -62.281797) "/>
			<circle id="Oval" cx="296.54267" cy="62.3413567" fill="#6B6969" r="5.89715536" transform="translate(296.542670, 62.341357) scale(-1, 1) translate(-296.542670, -62.341357) "/>
			<polygon id="Rectangle" fill="#CBCACA" points="289.803063 57.8939737 292.004365 55.6017505 303.401936 66.6696212 301.200634 68.9618443" transform="translate(296.602500, 62.281797) scale(-1, 1) rotate(-360.000000) translate(-296.602500, -62.281797) "/>
		</g>
		<g id="AgentArm" fillRule="nonzero" transform="translate(941.000000, 240.000000)">
			<g id="AgentHand" onClick={this.ruledBySecrecy} transform="translate(192.299141, 238.558665) rotate(-19.000000) translate(-192.299141, -238.558665) translate(76.783232, 26.824268)">
				<path id="Path-12" d="M124.525963,252.533969 C124.281508,247.611195 126.874185,241.165121 132.303996,233.195746 C137.733807,225.226372 147.225342,214.533206 160.778602,201.11625 L165.373699,198.093933 L163.842,216.772456 L144.008391,247.540248 L124.525963,252.533969 Z" fill="#CBCBCB"/>
				<path id="Path-11" d="M136.769226,265.097054 C139.740864,254.610228 142.630955,246.223263 145.439501,239.936159 C148.248047,233.649056 154.124559,223.342093 163.069038,209.015269 L171.033344,146.623463 C172.511102,137.752671 173.947244,131.295387 175.34177,127.251613 C176.736295,123.207838 179.253063,120.579056 182.892072,119.365265 L199.699068,228.110995 L136.769226,265.097054 Z" fill="#D8D8D8"/>
				<path id="Path-10" d="M187.42683,110.152336 C184.432056,111.061072 182.006148,118.689173 180.149105,133.036642 C178.292061,147.38411 178.134339,169.69261 179.675936,199.962144 L159.652805,240.808422 L199.699068,195.850009 L194.066155,122.534628 L187.42683,110.152336 Z" fill="#F2F2F2"/>
				<g id="poi" fill="#FFFFFF" transform="translate(75.070591, 0.698754)">
					<polygon id="poiOne" points="66.936254 99.738739 66.936254 90.1417214 49.4172992 84.5112325 29.0543721 86.8244473 0.491548432 77.0277066 29.0543721 91.1709375 49.4172992 91.1709375"/>
					<polygon id="poiTwo" points="30.3545455 14.3120666 56.8707337 43.0253554 61.6497913 62.1098854 71.9863176 77.7554213 80.9250257 71.0062285 66.9322948 57.9305133 60.2249288 39.2674684"/>
					<polygon id="poiThree" points="134.000613 46.7909753 134.945021 36.5031106 116.481658 31.5634687 96.1187307 33.8766835 67.5559071 24.0799429 96.1187307 38.2231737 116.481658 38.2231737" transform="translate(101.250464, 35.435459) scale(-1, 1) rotate(-285.000000) translate(-101.250464, -35.435459) "/>
				</g>
				<g id="LSD" stroke="#C93030" transform="translate(177.312266, 120.420905) rotate(-13.000000) translate(-177.312266, -120.420905) translate(163.399766, 88.008284)">
					<rect height="58.2995839" id="Rectangle-2" width="20.4522727" fill="#0089FF" rx="10.2261364" strokeWidth="4" x="3.68636364" y="4.52565881"/>
					<path id="CapsuleHead" d="M13.9125,3 C7.88569267,3 3,7.88569267 3,13.9125 L3,24.8142684 C3,30.8410757 7.88569267,35.7267684 13.9125,35.7267684 C19.9393073,35.7267684 24.825,30.8410757 24.825,24.8142684 L24.825,13.9125 C24.825,7.88569267 19.9393073,3 13.9125,3 Z" fill="#F5F5F5" strokeWidth="6"/>
				</g>
				<path id="Path-9" d="M2.36617649,342.994307 C8.70061713,331.685473 20.3673812,313.242195 37.3664687,287.664475 C43.6805821,272.894025 50.7743834,261.37227 58.6478725,253.099211 C66.5213615,244.826152 79.7729646,232.693021 98.4026817,216.699818 C120.279298,195.575865 135.664307,180.292387 144.55771,170.849384 C153.451112,161.406382 162.652802,151.0486 172.162778,139.776038 C182.680939,142.587781 185.310479,152.945563 180.051399,170.849384 C172.162778,197.705116 168.004381,198.315219 151.559522,214.101575 C140.596283,224.625813 131.920758,236.888837 125.532946,250.890647 C137.65017,247.341821 146.325696,244.682801 151.559522,242.913586 C159.410262,240.259763 165.879773,231.648902 175.966871,219.287423 C182.691603,211.046437 189.297279,202.022029 195.7839,192.214199 C194.427101,174.551778 193.04555,161.968448 191.639245,154.464211 C187.159358,130.558907 186.736999,113.136405 186.736999,106.144232 C186.736999,96.6493583 191.340873,89.3308234 200.548622,84.1886269 C210.835866,112.527336 217.275842,131.868189 219.868549,142.211184 C226.809537,169.900613 230.749453,185.348041 230.749453,186.810754 C230.749453,187.452098 231.370519,203.787124 219.868549,227.356008 C203.095283,261.726396 172.162778,307.288747 172.162778,307.288747 C172.162778,307.288747 147.576079,322.364955 98.4026817,352.517371 L27.3676172,422.683644 C4.36554944,380.866254 -3.96826414,354.303142 2.36617649,342.994307 Z" fill="#FFFFFF"/>
			</g>
			<g id="Sleeve" transform="translate(137.888850, 448.408888) rotate(-15.000000) translate(-137.888850, -448.408888) translate(32.069532, 312.865198)">
				<polygon id="Path-13" fill="#303030" points="109.593884 2.90116877 211.223194 130.852415 151.586352 271.009202 0.384151557 230.556945"/>
				<polygon id="Path-14" fill="#282828" points="11.8045455 206.734395 112.158308 0.414684594 211.480594 130.740564 109.524601 37.5818235"/>
			</g>
		</g>
		</g>
	</g>
	<Confidential confAnimation={this.state.playConfidential}/>
</svg>
</Waypoint>
</div>
        )
    }
}

export default TheAgent;