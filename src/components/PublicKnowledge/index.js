import React , { Component } from 'react';
import { TimelineMax } from 'gsap';
import Waypoint from 'react-waypoint';
import './style.css';

class PublicKnowledge extends Component {
    constructor(props) {
        super(props);
		this.theNews = this.theNews.bind(this);
        this.state = {
			animationEntered: false,
			onSwitch: false,
        }
    }

    componentDidMount() {
		this.knowledgetl = new TimelineMax({paused: true});
		this.channeltl = new TimelineMax({paused: true});
		this.newstl = new TimelineMax({paused: true});

        const {
			knowledgetl,
			channeltl,
			newstl
        } = this;

		knowledgetl.from("#Aerial", 1, {transformOrigin: "100% 100%", rotation: -15})

		channeltl.to("#Interfearance", 0.5, {autoAlpha: 1}, "channel")
		.to("#IWhite", 0.1, {fill: "grey", repeat: -1, autoAlpha: 0.5, yoyo: true}, "channel")
		.to("#IBlack", 0.1, {fill: "darkgrey", repeat: -1, autoAlpha: 0.5, yoyo: true}, "channel")

		newstl.to("#ButtonOne", 0.5, {transformOrigin: "50% 50%", rotation: 100}, "news")
		.to("#Interfearance", 0.5, {autoAlpha: 0}, "news")
		.to("#Screen", 0.5, {fill: "#434242"}, "news")
		.to("#News", 0.5, {autoAlpha: 1}, "news")

    }

    runAnimation = () => {
        console.log('Animation entered');
		this.knowledgetl.play(0, false).delay(1);
		this.channeltl.play(0, false).delay(1);
    }

    onEnter = () => {
        const {
            animationEntered
        } = this.state;

        if (animationEntered) {
            return;
        }
        else {
            this.runAnimation();

            this.setState({
                animationEntered: true,
            });
        }
    }
	
    theNews() {
		{(this.state.onSwitch === false) ? 
			(this.channeltl.kill(), this.newstl.play(0, false), this.setState({onSwitch: true})) : 
				(this.setState({onSwitch: false}), this.newstl.reverse(1), this.channeltl.play(0, true))}
				}

    render() {
        return (
<div>
            <Waypoint onEnter={this.onEnter}>

<svg id="PublicKnowledge" viewBox="0 0 1440 800">
	<g id="Artboard" fill="none" stroke="none" strokeWidth="1">
		<rect height="800" width="1440" fill="#C93030" x="0" y="0"/>
		<g id="Aerial" transform="translate(592.000000, 57.000000)">
			<rect height="12.0830966" id="Rectangle-3" width="142.402532" fill="#ACAAAA" transform="translate(88.289055, 40.893261) rotate(19.000000) translate(-88.289055, -40.893261) " x="17.0877893" y="34.8517126"/>
			<rect height="21.3961824" id="Rectangle-3" width="507.546146" fill="#D8D8D8" transform="translate(357.241573, 133.735675) rotate(19.000000) translate(-357.241573, -133.735675) " x="103.4685" y="123.037584"/>
			<rect height="25" id="Rectangle-4" width="20" fill="#363636" transform="translate(13.373278, 14.978376) rotate(-342.000000) translate(-13.373278, -14.978376) " x="3.37327759" y="2.4783764"/>
		</g>
		<g id="Casing" transform="translate(228.000000, 196.000000)">
			<polygon id="Path" fill="#2D2D2D" points="57 555.491283 66.6551962 604 155.277281 604 165.100566 555.491283"/>
			<polygon id="Path" fill="#2D2D2D" points="814 555.491283 823.655196 604 912.277281 604 922.100566 555.491283"/>
			<rect height="544" id="Rectangle" width="981" fill="#737272" rx="14" x="0" y="20"/>
			<path id="Path-2" d="M49.5366015,538 C172.884804,570.339144 313.300623,586.508717 470.78406,586.508717 C628.267498,586.508717 784.8858,570.339144 940.638968,538 C735.905387,548.790992 579.287084,554.186488 470.78406,554.186488 C362.281037,554.186488 221.865217,548.790992 49.5366015,538 Z" fill="#A1A1A1"/>
			<path id="Path-2" d="M48.0724734,-5.68434189e-14 C175.063427,32.3391444 317.300623,48.5087166 474.78406,48.5087166 C632.267498,48.5087166 785.183989,32.3391444 933.533534,-5.68434189e-14 C736.203575,10.7909922 583.287084,16.1864883 474.78406,16.1864883 C366.281037,16.1864883 224.043841,10.7909922 48.0724734,-5.68434189e-14 Z" fill="#A1A1A1" transform="translate(490.803004, 24.254358) scale(1, -1) translate(-490.803004, -24.254358) "/>
			<path id="Path-3" d="M31.0002841,49.0699812 C16.1414271,138.99593 8.71199865,222.662674 8.71199865,300.070214 C8.71199865,377.477754 18.934321,456.948479 39.3789657,538.482388 L31.0002841,49.0699812 Z" fill="#A1A1A1"/>
			<path id="Path-3" d="M975.666967,50.150301 C955.222322,137.309382 945,219.592693 945,297.000233 C945,374.407773 955.222322,453.878498 975.666967,535.412407 L975.666967,50.150301 Z" fill="#A1A1A1" transform="translate(960.333484, 292.781354) scale(-1, 1) translate(-960.333484, -292.781354) "/>
			<polygon id="Path-4" fill="#D8D8D8" points="57 69 57 517.296582 685.304927 517.296582 685.304927 69"/>
			<path id="Path-4" d="M714,69 L714,517.296582 L900.304927,517.296582 C912.455192,517.296582 922.304927,507.446847 922.304927,495.296582 L922.304927,91 C922.304927,78.8497355 912.455192,69 900.304927,69 L714,69 Z" fill="#D8D8D8"/>
			<polygon id="Path-5" fill="#A1A1A1" points="66.5953866 80.9375237 66.5953866 184.547686 86.8573616 104.368381 164.695952 80.9375237"/>
			<polygon id="Path-5" fill="#A1A1A1" points="67 402 67 505.610162 87.2619751 425.430857 165.100566 402" transform="translate(116.050283, 453.805081) scale(1, -1) translate(-116.050283, -453.805081) "/>
			<polygon id="Path-5" fill="#A1A1A1" points="578 81 578 184.610162 598.261975 104.430857 676.100566 81" transform="translate(627.050283, 132.805081) scale(-1, 1) translate(-627.050283, -132.805081) "/>
			<polygon id="Path-5" fill="#A1A1A1" points="578 402 578 505.610162 598.261975 425.430857 676.100566 402" transform="translate(627.050283, 453.805081) scale(-1, -1) translate(-627.050283, -453.805081) "/>
		</g>
		<path id="Screen" d="M403,300.999985 L797.000001,300.999984 C841.735065,300.999984 878.000001,337.26492 878.000001,381.999984 L878.000001,587.785364 C878.000001,628.186751 848.228279,662.410665 808.216096,668.005058 C758.660959,674.93372 689.255594,678.398051 600,678.398051 C510.744407,678.398051 441.339042,674.93372 391.783905,668.005058 L391.783905,668.005058 C351.771722,662.410666 322,628.186751 322,587.785365 L322,381.999985 C322,337.26492 358.264935,300.999985 403,300.999985 Z" fill="#B5B5B5"/>
		<g id="Interfearance" transform="translate(309.000000, 299.000000)">
			<path id="IBlack" d="M12.1373837,281.03908 L69.2829966,330.487799 L72.0870015,303.649292 L141.832837,338.943248 L138.23422,303.649292 L202.141414,330.487799 L198.907319,281.938811 L239.766423,330.487799 L238.340461,298.334044 L290.593066,345.662372 L366.154412,298.334044 L359.430164,338.943248 L397.740655,281.03908 L432.3747,339.652045 L497.090442,288.822965 L519.203355,338.943248 L572.984186,281.03908 C574.736638,284.204384 573.815337,292.166375 570.220285,304.925051 C566.625232,317.683727 560.02417,336.418257 550.417097,361.12864 C541.774091,365.261938 526.408806,369.72988 504.32124,374.532466 C482.233674,379.335052 430.356131,384.482626 348.688612,389.975188 L55.5002667,371.449752 L12.1373837,325.414529 L12.1373837,281.03908 Z" fill="#535353"/>
			<polygon id="IWhite" fill="#FFFFFF" points="12.5385479 232.195429 58.1839469 293.674941 58.1839469 260.775739 93.8722053 299.17105 93.8722053 240.87877 129.01468 274.215328 139.209633 250.644567 155.359918 292.142373 226.918667 240.87877 216.713691 265.683239 289.729382 244.88969 267.391418 299.17105 331.133338 260.775739 317.849557 299.17105 394.876168 240.87877 374.210181 282.782041 432.271026 244.88969 463.454517 274.215328 507.926343 235.937557 549.001371 269.287782 569.893326 220.931687 569.893326 290.042152 519.776369 340.080307 496.470191 290.042152 432.271026 340.080307 398.754484 286.020524 357.532281 344.101342 365.718217 299.17105 291.215937 347.532529 238.658784 299.17105 247.573637 344.101342 199.848723 284.232108 206.756655 336.315831 139.209633 305.192972 145.978363 344.101342 72.8540301 305.192972 72.8540301 336.315831 7.43368426 279.572961"/>
			<polygon id="IBlack" fill="#535353" points="6.91162936 211.29405 24.9055515 181.83995 42.0129314 216.256524 85.7922556 176.282844 100.658053 196.269684 151.641433 166.4552 151.641433 216.256524 182.645181 166.4552 207.331415 196.269684 247.276264 166.4552 247.276264 220.963126 302.681543 204.007107 302.681543 220.963126 368.739743 188.22954 373.604913 204.007107 404.734795 176.282844 416.2202 216.256524 469.801942 181.83995 483.190169 196.269684 521.888821 162.083812 571.658261 171.908345 571.658261 216.256524 549.379597 269.708843 508.079389 235.77243 463.425694 274.752707 432.324752 245.39667 373.604913 283.338431 394.725031 241.421063 317.468387 299.496149 330.572522 261.157818 266.933074 299.496149 289.284945 245.39667 216.07307 265.688622 226.520191 241.421063 155.281485 293.502997 139.173338 251.645114 129.107915 274.752707 94.0090597 241.421063 94.0090597 299.496149 58.1121083 261.157818 58.1121083 293.502997 10.5882428 230.789981"/>
			<polygon id="IWhite" fill="#FFFFFF" points="5.34544324 144.098097 40.3859909 118.937522 55.4300942 174.768724 85.8077463 144.098097 103.887497 164.475762 173.244979 118.937522 195.998214 159.33281 259.962127 133.628643 274.480287 195.629975 335.295598 144.098097 354.603727 174.768724 450.614898 133.628643 450.614898 174.768724 491.5326 144.098097 533.632793 157.283748 569.979375 125.13589 577.413181 174.768724 521.292533 164.475762 486.234337 205.319337 467.370965 189.717522 411 233.677931 405.309627 180.988271 369.294848 218.326733 369.294848 195.629975 298.101859 233.677931 298.101859 210.342275 244.240298 228.174938 244.240298 174.768724 207.473667 205.319337 182.126012 174.768724 146.831317 233.677931 146.831317 174.768724 98.3456757 205.319337 85.8077463 180.988271 40.3859909 228.174938 24.6500423 189.717522 5.34544324 210.342275"/>
			<polygon id="IBlack" fill="#535353" points="7.81411454 101 41.7154529 93.0708361 76.0679003 121.347914 141.040597 76.9996675 189.520225 101 264.209618 93.0708361 296.131269 141.501783 401.379249 93.0708361 488.125264 126.852095 542.433612 93.0708361 576.506956 121.347914 535.813017 161.830903 492.665564 147.285067 437.854181 194.862477 448.528267 141.501783 352.354396 181.248068 335.020771 151.799404 271.550689 201.823837 257.842164 139.411752 194.927044 167.571997 173.020665 121.347914 104.166482 172.196677 84.1716378 151.799404 53.0645798 186.22325 36.6201914 126.852095 0.622331492 151.799404"/>
			<polygon id="IWhite" fill="#FFFFFF" points="8.37125843 80.7833543 50.2698185 54.5363505 77.663857 80.7833543 136.790828 35.7285412 158.701481 58.2559477 171.711299 43.4591307 205.690517 78.2449881 263.981977 38.4503785 279.26221 61.7059536 290.321537 43.4591307 322.953806 94.9267252 390.845039 46.756352 423.320619 80.7833543 495.050608 44.7799728 506.150557 70.7189072 539.372052 46.756352 553.440237 90.0796471 567.521455 61.7059536 572.52161 119.339999 539.372052 101 489.505288 130.515322 402.549371 94.9267252 295.76069 146.906983 263.981977 94.9267252 190.05546 106.636144 142.004623 80.7833543 77.663857 126.201861 40.3661526 94.9267252 2.83954979 101"/>
			<polygon id="IBlack" fill="#535353" points="20.0524228 49.9784843 55.91076 28.9175164 77.3139342 46.0614437 147.829831 14.3065273 191.885844 46.0614437 278.968195 20.1454232 322.859215 40.2561573 411 20.1454232 454.293954 40.2561573 511.995445 20.1454232 553.185479 36.1038499 571.004653 54.1552351 553.185479 91.4465614 539.145852 46.0614437 505.771566 71.4549884 494.802631 46.0614437 423.082901 80.7495574 391.764909 46.0614437 322.859215 95.9074657 290.056292 46.0614437 278.968195 61.005473 264.302208 40.2561573 205.775755 80.7495574 171.277077 46.0614437 159.101253 61.005473 137.096162 36.1038499 77.3139342 80.7495574 50.9304354 54.1552351 8.34407681 80.7495574"/>
			<polygon id="IWhite" fill="#FFFFFF" points="43.8602077 13.9734872 77.8730749 0.0774648778 516.57551 0.0774648778 540.034978 13.9734872 563.213347 40.0819987 510.861886 20.0797318 455.134192 40.0819987 411 20.0797318 322.795051 40.0819987 278.97125 20.0797318 193.126342 46.1775494 147.887884 13.9734872 77.8730749 46.1775494 56.1215836 27.7564592 14.7115593 53.4219357"/>
		</g>
		<path id="ScreenCover" d="M403,292.499985 L797.000001,292.499984 C846.429486,292.499984 886.500001,332.570499 886.500001,381.999984 L886.500001,587.785364 C886.500001,632.426402 853.604086,670.241715 809.393093,676.423174 C759.380795,683.415755 689.615514,686.898051 600,686.898051 C510.384486,686.898051 440.619206,683.415755 390.606907,676.423174 C346.395915,670.241716 313.5,632.426403 313.5,587.785365 L313.5,381.999985 C313.5,332.5705 353.570515,292.499985 403,292.499985 Z" stroke="#D8D8D8" strokeWidth="17"/>
		<g onClick={this.theNews} id="ButtonOne" transform="translate(972.000000, 286.000000)">
			<circle id="Oval" cx="75.5" cy="90.5" fill="#4D4C4C" r="75.5" stroke="#767676" strokeWidth="13"/>
			<polygon id="Path-6" fill="#424242" points="53.6605949 32 12 89.0414616 53.6605949 151.397782 31.338841 89.0414616"/>
			<polygon id="Path-6" fill="#424242" points="139.660595 32 98 89.0414616 139.660595 151.397782 117.338841 89.0414616" transform="translate(118.830297, 91.698891) scale(-1, 1) translate(-118.830297, -91.698891) "/>
			<rect height="185" id="Rectangle-2" width="29" fill="#767676" x="61" y="0"/>
		</g>
		<text id="News" fill="#FFFFFF" fontFamily="Krungthep" fontSize="77">
			<tspan x="397.905078" y="466">BREAKING</tspan>
			<tspan x="487.688281" y="564">NEWS</tspan>
		</text>
		<g id="Speaker" transform="translate(957.000000, 501.000000)">
			<rect height="201" id="Rectangle-6" width="178" fill="#BABABA" x="0" y="0"/>
			<rect height="20" id="Rectangle-5" width="151" fill="#A1A1A1" x="14" y="16"/>
			<rect height="20" id="Rectangle-5" width="151" fill="#A1A1A1" x="14" y="46"/>
			<rect height="20" id="Rectangle-5" width="151" fill="#A1A1A1" x="14" y="76"/>
			<rect height="20" id="Rectangle-5" width="151" fill="#A1A1A1" x="14" y="106"/>
			<rect height="20" id="Rectangle-5" width="151" fill="#A1A1A1" x="14" y="136"/>
			<rect height="20" id="Rectangle-5" width="151" fill="#A1A1A1" x="14" y="166"/>
		</g>
	</g>
</svg>
</Waypoint>
</div>
        )
    }
}

export default PublicKnowledge;